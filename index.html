<script>
  // Hide React until maintenance status is known
  document.write("<style>#root{display:none}</style>");

  (async () => {
    try {
      const resp = await fetch("https://<YOUR_PROJECT>.supabase.co/functions/v1/check-maintenance");
      const { allowed } = await resp.json();

      if (!allowed) {
        // Redirect if maintenance mode ON
        window.location.replace("/maintenance.html");
      } else {
        // Show React app
        document.getElementById("root").style.display = "block";
      }
    } catch (err) {
      console.error("Maintenance check failed", err);
      // Fail open = show app
      document.getElementById("root").style.display = "block";
    }
  })();
</script>
